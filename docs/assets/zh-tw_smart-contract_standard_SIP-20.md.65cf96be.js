import{_ as s,o as a,c as o,O as l}from"./chunks/framework.62a149d4.js";const D=JSON.parse('{"title":"SIP20-SRC20 代幣標準","description":"","frontmatter":{},"headers":[],"relativePath":"zh-tw/smart-contract/standard/SIP-20.md","filePath":"zh-tw/smart-contract/standard/SIP-20.md"}'),n={name:"zh-tw/smart-contract/standard/SIP-20.md"},e=l('<h1 id="sip20-src20-代幣標準" tabindex="-1">SIP20-SRC20 代幣標準 <a class="header-anchor" href="#sip20-src20-代幣標準" aria-label="Permalink to &quot;SIP20-SRC20 代幣標準&quot;">​</a></h1><h2 id="簡要說明" tabindex="-1">簡要說明 <a class="header-anchor" href="#簡要說明" aria-label="Permalink to &quot;簡要說明&quot;">​</a></h2><p>代幣（Token）的標準介面。</p><h2 id="摘要" tabindex="-1">摘要 <a class="header-anchor" href="#摘要" aria-label="Permalink to &quot;摘要&quot;">​</a></h2><p>本標準說明了在智能合約中實現代幣的標準API。</p><p>該標準提供了代幣的基本功能：如轉移代幣，授權代幣給其他人（如鏈上第三方應用）使用。</p><h2 id="動機" tabindex="-1">動機 <a class="header-anchor" href="#動機" aria-label="Permalink to &quot;動機&quot;">​</a></h2><p>標準介面允許以太坊上的任何代幣被其他應用程序重用，如錢包、去中心化交易所等。</p><h2 id="api-規範" tabindex="-1">API 規範 <a class="header-anchor" href="#api-規範" aria-label="Permalink to &quot;API 規範&quot;">​</a></h2><h3 id="函數" tabindex="-1">函數 <a class="header-anchor" href="#函數" aria-label="Permalink to &quot;函數&quot;">​</a></h3><p><strong>注意</strong>:</p><ul><li>API 規範使用 Solidity 0.4.17（或以上版本）的語法</li><li>呼叫者必須處理 <code>returns (bool success)</code> 返回<code>false</code> , 不能假定<code>false</code>不會返回。</li></ul><h4 id="可選函數-name" tabindex="-1">可選函數: name <a class="header-anchor" href="#可選函數-name" aria-label="Permalink to &quot;可選函數: name&quot;">​</a></h4><p>函數返回代幣的名稱 - 如 <code>&quot;MyToken&quot;</code> 或 <code>&quot;我的代幣&quot;</code></p><p>此函數是可選的，但是這個函數可以提高代幣的可用性，不過呼叫者不能假定這個函數存在。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">name</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="可選函數-symbol" tabindex="-1">可選函數: symbol <a class="header-anchor" href="#可選函數-symbol" aria-label="Permalink to &quot;可選函數: symbol&quot;">​</a></h4><p>函數返回代幣的代號(通常為字母縮寫)，如 &quot;HIX&quot;，&quot;UPT&quot;。</p><p>此函數是可選的，但是這個函數可以提高代幣的可用性，不過呼叫者不能假定這個函數存在。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">symbol</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="可選函數-decimals" tabindex="-1">可選函數: decimals <a class="header-anchor" href="#可選函數-decimals" aria-label="Permalink to &quot;可選函數: decimals&quot;">​</a></h4><p>返回代幣使用的小數位數 - 例如&quot;8&quot;，意味著將代幣量除以&quot;100000000&quot;以獲取其使用者表示形式。</p><p>此函數是可選的，但是這個函數可以提高代幣的可用性，不過呼叫者不能假定這個函數存在。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">decimals</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint8</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函數-totalsupply" tabindex="-1">函數: totalSupply <a class="header-anchor" href="#函數-totalsupply" aria-label="Permalink to &quot;函數: totalSupply&quot;">​</a></h4><p>返回總代幣供應量。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">totalSupply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函數-balanceof" tabindex="-1">函數: balanceOf <a class="header-anchor" href="#函數-balanceof" aria-label="Permalink to &quot;函數: balanceOf&quot;">​</a></h4><p>返回帳戶（通過參數&quot;_owner&quot;）的餘額。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">balanceOf</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_owner</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">balance</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函數-transfer" tabindex="-1">函數: transfer <a class="header-anchor" href="#函數-transfer" aria-label="Permalink to &quot;函數: transfer&quot;">​</a></h4><p>向 <code>_to</code> 地址轉移 <code>_value</code> 數量的代幣，函數必須觸發事件 <code>Transfer</code> 。</p><p>如果調用方的帳戶餘額沒有足夠的代幣，則該函數需要拋出異常。</p><p><em>注意</em> 轉移0個代幣也是正常轉移動作，同樣需要觸發 <code>Transfer</code> 事件。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transfer</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_to</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">success</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函數-transferfrom" tabindex="-1">函數: transferFrom <a class="header-anchor" href="#函數-transferfrom" aria-label="Permalink to &quot;函數: transferFrom&quot;">​</a></h4><p>從 <code>_from</code> 向 <code>_to</code> 地址轉移 <code>_value</code> 數量的代幣，函數必須觸發事件 <code>Transfer</code> 。</p><p><code>transferFrom</code> 函數，可以允許第三方代表我們轉移代幣。</p><p>如果 <code>_from</code> 帳號沒有授權調用帳戶轉移代幣，則該函數需要拋出異常。</p><p><em>注意</em> 轉移0個代幣也是正常轉移動作，同樣需要觸發 <code>Transfer</code> 事件。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transferFrom</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_from</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_to</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">success</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函數-approve" tabindex="-1">函數: approve <a class="header-anchor" href="#函數-approve" aria-label="Permalink to &quot;函數: approve&quot;">​</a></h4><p>授權 <code>_spender</code> 可以從我們帳戶最多轉移代幣的數量 <code>_value</code>，可以多次轉移，總量不超過 <code>_value</code> 。</p><p>這個函數可以再次調用，以覆蓋授權額度 <code>_value</code> 。</p><p><strong>注意</strong>: 為了阻止向量攻擊，調用者可以在調整授權額度時，先設置為0，然後在設置為一個其他額度。</p><blockquote><p>簡單描述下：向量攻擊， 假如 Alice 開始時給Bob授權了 N，現在 Alice 想調整為 M ，於是發起了一筆調整授權的交易，這時Bob觀察到了這筆交易， 迅速通過 transferFrom 交易（用更高的手續費，礦工優先打包）把 N 個幣轉移走，待 Alice 調整授權的交易打包後，Bob 又獲得了 M 個授權。 這就相當於Bob 獲得了 N + M個授權， 而不是 Alice 想要的 M個授權。</p></blockquote><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">approve</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_spender</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">success</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函數-allowance" tabindex="-1">函數: allowance <a class="header-anchor" href="#函數-allowance" aria-label="Permalink to &quot;函數: allowance&quot;">​</a></h4><p>查詢 <code>_owner</code> 授權給 <code>_spender</code> 的額度。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">allowance</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_owner</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_spender</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">remaining</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="事件events" tabindex="-1">事件Events <a class="header-anchor" href="#事件events" aria-label="Permalink to &quot;事件Events&quot;">​</a></h3><h4 id="事件-transfer" tabindex="-1">事件：Transfer <a class="header-anchor" href="#事件-transfer" aria-label="Permalink to &quot;事件：Transfer&quot;">​</a></h4><p>當有代幣轉移時（包括轉移0），必須觸發 Transfer 事件。</p><p>如果是新產生代幣，觸發 Transfer 事件的 <code>_from</code> 應該設置為 <code>0x0</code>。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">event</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Transfer</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_from</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_to</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="事件-approval" tabindex="-1">事件：Approval <a class="header-anchor" href="#事件-approval" aria-label="Permalink to &quot;事件：Approval&quot;">​</a></h4><p><code>approve(address _spender, uint256 _value)</code> 函數成功執行時，必須觸發 Approval 事件。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">event</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Approval</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_owner</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_spender</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="實現" tabindex="-1">實現 <a class="header-anchor" href="#實現" aria-label="Permalink to &quot;實現&quot;">​</a></h2><p>在以太坊網絡上已經有大量符合 ERC20 的代幣。 各個團隊有不同的實現，有些注重安全性，有些關注使用更少的 gas。</p><h3 id="實現示例" tabindex="-1">實現示例 <a class="header-anchor" href="#實現示例" aria-label="Permalink to &quot;實現示例&quot;">​</a></h3><ul><li><a href="https://github.com/OpenZeppelin/openzeppelin-solidity/blob/9b3710465583284b8c4c5d2245749246bb2e0094/contracts/token/ERC20/ERC20.sol" target="_blank" rel="noreferrer">OpenZeppelin</a></li><li><a href="https://github.com/ConsenSys/Tokens/blob/fdf687c69d998266a95f15216b1955a4965a0a6d/contracts/eip20/EIP20.sol" target="_blank" rel="noreferrer">ConsenSys 實現</a></li></ul>',62),p=[e];function t(r,c,i,y,C,A){return a(),o("div",null,p)}const F=s(n,[["render",t]]);export{D as __pageData,F as default};
