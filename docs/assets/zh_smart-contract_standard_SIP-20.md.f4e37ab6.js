import{_ as s,o as a,c as o,O as l}from"./chunks/framework.4afe7240.js";const D=JSON.parse('{"title":"SIP20-SRC20 代币标准","description":"","frontmatter":{},"headers":[],"relativePath":"zh/smart-contract/standard/SIP-20.md","filePath":"zh/smart-contract/standard/SIP-20.md"}'),n={name:"zh/smart-contract/standard/SIP-20.md"},e=l('<h1 id="sip20-src20-代币标准" tabindex="-1">SIP20-SRC20 代币标准 <a class="header-anchor" href="#sip20-src20-代币标准" aria-label="Permalink to &quot;SIP20-SRC20 代币标准&quot;">​</a></h1><h2 id="简要说明" tabindex="-1">简要说明 <a class="header-anchor" href="#简要说明" aria-label="Permalink to &quot;简要说明&quot;">​</a></h2><p>代币（Token）的标准接口。</p><h2 id="摘要" tabindex="-1">摘要 <a class="header-anchor" href="#摘要" aria-label="Permalink to &quot;摘要&quot;">​</a></h2><p>本标准说明了在智能合约中实现代币的标准API。</p><p>该标准提供了代币的基本功能：如转移代币，授权代币给其他人（如链上第三方应用）使用。</p><h2 id="动机" tabindex="-1">动机 <a class="header-anchor" href="#动机" aria-label="Permalink to &quot;动机&quot;">​</a></h2><p>标准接口允许以太坊上的任何代币被其他应用程序重用，如钱包、去中心化交易所等。</p><h2 id="api-规范" tabindex="-1">API 规范 <a class="header-anchor" href="#api-规范" aria-label="Permalink to &quot;API 规范&quot;">​</a></h2><h3 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-label="Permalink to &quot;函数&quot;">​</a></h3><p><strong>注意</strong>:</p><ul><li>API 规范使用 Solidity 0.4.17（或以上版本）的语法</li><li>调用者必须处理 <code>returns (bool success)</code> 返回<code>false</code> , 不能假定<code>false</code>不会返回。</li></ul><h4 id="可选函数-name" tabindex="-1">可选函数: name <a class="header-anchor" href="#可选函数-name" aria-label="Permalink to &quot;可选函数: name&quot;">​</a></h4><p>函数返回代币的名称 - 如 <code>&quot;MyToken&quot;</code> 或 <code>&quot;我的代币&quot;</code></p><p>此函数是可选函数，但是这个函数可以提高代币可用性，不过调用者不能假定这个函数存在。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">name</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="可选函数-symbol" tabindex="-1">可选函数: symbol <a class="header-anchor" href="#可选函数-symbol" aria-label="Permalink to &quot;可选函数: symbol&quot;">​</a></h4><p>函数返回代币的代号(通常为字母缩写)，如 &quot;HIX&quot;，&quot;UPT&quot;。</p><p>此函数是可选函数，但是这个函数可以提高代币可用性，不过调用者不能假定这个函数存在。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">symbol</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="可选函数-decimals" tabindex="-1">可选函数: decimals <a class="header-anchor" href="#可选函数-decimals" aria-label="Permalink to &quot;可选函数: decimals&quot;">​</a></h4><p>返回令牌使用的小数位数 - 例如&quot;8&quot;，意味着将令牌量除以&quot;100000000&quot;以获取其用户表示形式。</p><p>此函数是可选函数，但是这个函数可以提高代币可用性，不过调用者不能假定这个函数存在。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">decimals</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint8</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函数-totalsupply" tabindex="-1">函数: totalSupply <a class="header-anchor" href="#函数-totalsupply" aria-label="Permalink to &quot;函数: totalSupply&quot;">​</a></h4><p>返回总令牌供应量。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">totalSupply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函数-balanceof" tabindex="-1">函数: balanceOf <a class="header-anchor" href="#函数-balanceof" aria-label="Permalink to &quot;函数: balanceOf&quot;">​</a></h4><p>返回帐户（通过参数&quot;_owner&quot;）的余额。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">balanceOf</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_owner</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">balance</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函数-transfer" tabindex="-1">函数: transfer <a class="header-anchor" href="#函数-transfer" aria-label="Permalink to &quot;函数: transfer&quot;">​</a></h4><p>向 <code>_to</code> 地址转移 <code>_value</code> 数量的代币，函数必须触发事件 <code>Transfer</code> 。</p><p>如果调用方的帐户余额没有足够的令牌，则该函数需要抛出异常。</p><p><em>注意</em> 转移0个代币也是正常转移动作，同样需要触发 <code>Transfer</code> 事件。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transfer</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_to</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">success</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函数-transferfrom" tabindex="-1">函数: transferFrom <a class="header-anchor" href="#函数-transferfrom" aria-label="Permalink to &quot;函数: transferFrom&quot;">​</a></h4><p>从 <code>_from</code> 向 <code>_to</code> 地址转移 <code>_value</code> 数量的代币，函数必须触发事件 <code>Transfer</code> 。</p><p><code>transferFrom</code> 函数，可以允许第三方代表我们转移代币。</p><p>如果 <code>_from</code> 账号没有授权调用帐户转移代币，则该函数需要抛出异常。</p><p><em>注意</em> 转移0个代币也是正常转移动作，同样需要触发 <code>Transfer</code> 事件。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transferFrom</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_from</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_to</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">success</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函数-approve" tabindex="-1">函数: approve <a class="header-anchor" href="#函数-approve" aria-label="Permalink to &quot;函数: approve&quot;">​</a></h4><p>授权 <code>_spender</code> 可以从我们账户最多转移代币的数量 <code>_value</code>，可以多次转移，总量不超过 <code>_value</code> 。</p><p>这个函数可以再次调用，以覆盖授权额度 <code>_value</code> 。</p><p><strong>注意</strong>: 为了阻止向量攻击，调用者可以在调整授权额度时，先设置为0，然后在设置为一个其他额度。</p><blockquote><p>简单描述下：向量攻击， 假如 Alice 开始时给Bob授权了 N, 现在 Alice 想调整为 M ，于是发起了一笔调整授权的交易，这时Bob观察到了这笔交易， 迅速通过 transferFrom 交易（用更高的手续费，矿工优先打包）把 N 个币转移走，待 Alice 调整授权的交易打包后，Bob 又获得了 M 个授权。 这就相当于Bob 获得了 N + M个授权， 而不是 Alice 想要的 M个授权。</p></blockquote><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">approve</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_spender</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">success</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="函数-allowance" tabindex="-1">函数: allowance <a class="header-anchor" href="#函数-allowance" aria-label="Permalink to &quot;函数: allowance&quot;">​</a></h4><p>查询 <code>_owner</code> 授权给 <code>_spender</code> 的额度。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">allowance</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_owner</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_spender</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">remaining</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="事件events" tabindex="-1">事件Events <a class="header-anchor" href="#事件events" aria-label="Permalink to &quot;事件Events&quot;">​</a></h3><h4 id="事件-transfer" tabindex="-1">事件：Transfer <a class="header-anchor" href="#事件-transfer" aria-label="Permalink to &quot;事件：Transfer&quot;">​</a></h4><p>当有代币转移时（包括转移0），必须触发 Transfer 事件。</p><p>如果是新产生代币，触发 Transfer 事件的 <code>_from</code> 应该设置为 <code>0x0</code> 。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">event</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Transfer</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_from</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_to</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="事件-approval" tabindex="-1">事件：Approval <a class="header-anchor" href="#事件-approval" aria-label="Permalink to &quot;事件：Approval&quot;">​</a></h4><p><code>approve(address _spender, uint256 _value)</code> 函数成功执行时，必须触发 Approval 事件。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">event</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Approval</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_owner</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">indexed</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_spender</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">_value</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="实现" tabindex="-1">实现 <a class="header-anchor" href="#实现" aria-label="Permalink to &quot;实现&quot;">​</a></h2><p>在以太坊网络上已经有大量符合 ERC20 的代币。 各个团队有不同的实现， 有些注重安全性，有些关注使用更少的gas。</p><h3 id="实现示例" tabindex="-1">实现示例 <a class="header-anchor" href="#实现示例" aria-label="Permalink to &quot;实现示例&quot;">​</a></h3><ul><li><a href="https://github.com/OpenZeppelin/openzeppelin-solidity/blob/9b3710465583284b8c4c5d2245749246bb2e0094/contracts/token/ERC20/ERC20.sol" target="_blank" rel="noreferrer">OpenZeppelin</a></li><li><a href="https://github.com/ConsenSys/Tokens/blob/fdf687c69d998266a95f15216b1955a4965a0a6d/contracts/eip20/EIP20.sol" target="_blank" rel="noreferrer">ConsenSys 实现</a></li></ul>',62),p=[e];function t(r,c,i,y,C,A){return a(),o("div",null,p)}const F=s(n,[["render",t]]);export{D as __pageData,F as default};
